{"version":3,"sources":["meteor://ðŸ’»app/imports/server/collections.js","meteor://ðŸ’»app/imports/server/methods.js","meteor://ðŸ’»app/server/main.js"],"names":["ColorPresets","Mongo","Collection","ServerLogs","Configs","module","link","__reifyWaitForDeps__","Meteor","methods","getInstance","getConfig","findOneAsync","login","pass","token","userPassword","setColor","_mode","_color","color","getColorByName","dateNow","Date","call","err","res","updateAsync","_id","$set","mode","actualColorId","kph","mph","dev","updatedAt","timestamp","valueOf","addColor","_name","_hex","_rgb","b","r","g","sendArtnet","getColors","checkConfig","countDocuments","changePassword","_master","_new","config","masterPassword","name","__reify_async_result__","_reifyError","self","async","v","INSTANCE","HOST","artnet","require","host","port","refresh","sendAll","cron","h","m","s","schedule","concat","defer","cfg","actualColorRgb","startup","insertAsync","power","defaultColorName","defaultColorRgb","interfaceIp","interfaceName","universes","universeZeroFixtures","universeOneFixtures","universeTwoFixtures","createdAt","console","log","cursorConfigs","find","cursorLogs","observeChanges","changed","id","obj","added","object","instance","status","loopGen","fixturesQtt","rgb","opacity","arguments","length","undefined","arrayFixtures","i","push","set"],"mappings":"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","file":"/app.js","sourcesContent":["ColorPresets = new Mongo.Collection('presets')\nServerLogs = new Mongo.Collection('serverlogs')\nConfigs = new Mongo.Collection('configs')","import './collections'\n\nMeteor.methods({\n  async getInstance() {\n    return await 'mph'\n  },\n\n  async getConfig() {\n    return await Configs.findOneAsync()\n  },\n\n  async login(pass) {\n    const token = await Configs.findOneAsync();\n    return token.userPassword == pass ? true : false\n  },\n\n  setColor(_mode, _color) {\n    let color = getColorByName(_color)\n    let dateNow = new Date()\n\n    Meteor.call('getConfig', (err, res) => {\n      Configs.updateAsync(res._id, {\n        $set: {\n          mode: _mode,\n          actualColorId: _color,\n          'kph.actualColorRgb': color.kph,\n          'mph.actualColorRgb': color.mph,\n          'dev.actualColorRgb': color.dev,\n          updatedAt: dateNow,\n          timestamp: dateNow.valueOf()\n        }\n      })\n    })\n  },\n\n  addColor(_name, _hex, _rgb) {\n    let color = { b: _rgb.b, r: _rgb.r, g: _rgb.g }\n    sendArtnet(color)\n\n    // artnet.set(0, 1, loopGen(UNI_1_FIXTURES, color));\n    // artnet.set(1, 1, loopGen(UNI_2_FIXTURES, color));\n\n    // let dateTime = new Date()\n    // ColorPresets.insertAsync({\n    //   name: _name,\n    //   createdAt: dateTime,\n    //   timestamp: dateTime.valueOf(),\n    //   color: {\n    //     hex: _hex,\n    //     r: _rgb.r,\n    //     g: _rgb.g,\n    //     b: _rgb.b\n    //   }\n    // })\n  },\n\n  async getColors() {\n    return await ColorPresets.findOneAsync()\n  },\n\n  async checkConfig() {\n    return await Configs.countDocuments()\n  },\n\n  async changePassword(_master, _new) {\n    let config = await Configs.findOneAsync()\n    let dateNow = new Date()\n    if (_master === config.masterPassword) {\n      Configs.updateAsync(config._id, {\n        $set: {\n          userPassword: _new,\n          mode: config.mode,\n          actualColorId: config.actualColorId,\n          kph: config.kph,\n          mph: config.mph,\n          dev: config.dev,\n          updatedAt: dateNow,\n          timestamp: dateNow.valueOf()\n        }\n      })\n      return true\n    } else {\n      return false\n    }\n  }\n});\n\nfunction getColorByName(color) {\n  switch (color) {\n    case 'ambar':\n      return {\n        name: 'Ã‚mbar',\n        mph: { \"r\": 255, \"g\": 156, \"b\": 62 },\n        dev: { \"r\": 255, \"g\": 156, \"b\": 62 },\n        kph: { \"r\": 206, \"g\": 156, \"b\": 62 }\n      }\n    case 'preto':\n      return {\n        name: 'Desligado',\n        mph: { \"r\": 0, \"g\": 0, \"b\": 0 },\n        dev: { \"r\": 0, \"g\": 0, \"b\": 0 },\n        kph: { \"r\": 0, \"g\": 0, \"b\": 0 }\n      }\n    case 'branco':\n      return {\n        name: 'Branco',\n        mph: { \"r\": 255, \"g\": 255, \"b\": 255 },\n        dev: { \"r\": 255, \"g\": 255, \"b\": 255 },\n        kph: { \"r\": 255, \"g\": 255, \"b\": 255 }\n      }\n    case 'roxo':\n      return {\n        name: 'Roxo',\n        mph: { \"r\": 128, \"g\": 0, \"b\": 255 },\n        kph: { \"r\": 128, \"g\": 0, \"b\": 255 },\n        dev: { \"r\": 128, \"g\": 0, \"b\": 255 }\n      }\n    case 'azul-marinho':\n      return {\n        name: 'Azul-Marinho',\n        mph: { \"r\": 0, \"g\": 0, \"b\": 128 },\n        kph: { \"r\": 0, \"g\": 0, \"b\": 128 },\n        dev: { \"r\": 0, \"g\": 0, \"b\": 128 }\n      }\n    case 'verde':\n      return {\n        name: 'Verde',\n        mph: { \"r\": 0, \"g\": 255, \"b\": 0 },\n        kph: { \"r\": 0, \"g\": 255, \"b\": 0 },\n        dev: { \"r\": 0, \"g\": 255, \"b\": 0 }\n      }\n    case 'amarelo':\n      return {\n        name: 'Amarelo',\n        mph: { \"r\": 255, \"g\": 255, \"b\": 0 },\n        kph: { \"r\": 206, \"g\": 255, \"b\": 0 },\n        dev: { \"r\": 255, \"g\": 255, \"b\": 0 }\n      }\n    case 'vermelho':\n      return {\n        name: 'Vermelho',\n        mph: { \"r\": 255, \"g\": 0, \"b\": 0 },\n        kph: { \"r\": 255, \"g\": 0, \"b\": 0 },\n        dev: { \"r\": 255, \"g\": 0, \"b\": 0 }\n      }\n    case 'dourado':\n      return {\n        name: 'Dourado',\n        mph: { \"r\": 218, \"g\": 165, \"b\": 32 },\n        kph: { \"r\": 218, \"g\": 165, \"b\": 32 },\n        dev: { \"r\": 218, \"g\": 165, \"b\": 32 }\n      }\n    case 'rosa':\n      return {\n        name: 'Rosa',\n        mph: { \"r\": 255, \"g\": 0, \"b\": 255 },\n        kph: { \"r\": 255, \"g\": 0, \"b\": 255 },\n        dev: { \"r\": 255, \"g\": 0, \"b\": 255 }\n      }\n    case 'azul':\n      return {\n        name: 'Azul',\n        mph: { \"r\": 0, \"g\": 0, \"b\": 255 },\n        kph: { \"r\": 0, \"g\": 0, \"b\": 255 },\n        dev: { \"r\": 0, \"g\": 0, \"b\": 255 }\n      }\n    case 'laranja':\n      return {\n        name: 'Laranja',\n        mph: { \"r\": 255, \"g\": 165, \"b\": 0 },\n        kph: { \"r\": 206, \"g\": 165, \"b\": 0 },\n        dev: { \"r\": 255, \"g\": 165, \"b\": 0 }\n      }\n    default:\n      return {\n        name: 'PadrÃ£o',\n        mph: { \"r\": 255, \"g\": 156, \"b\": 62 },\n        kph: { \"r\": 206, \"g\": 156, \"b\": 62 },\n        dev: { \"r\": 206, \"g\": 156, \"b\": 62 }\n      }\n  }\n}","import { Meteor } from 'meteor/meteor';\nimport '../imports/server/collections'\nimport '../imports/server/methods'\n\n////////// IMPORTANTE! //////////\n\nvar INSTANCE = 'mph';\n\n////////////////////////////////\n\nvar HOST;\n\nif (INSTANCE == 'dev') {\n  HOST = '127.0.0.1'\n} else if (INSTANCE == 'mph') {\n  HOST = '10.0.0.100'\n} else if (INSTANCE == 'kph') {\n  HOST = '192.168.0.30'\n}\n\nvar artnet = require('artnet')({\n  host: HOST,\n  port: 6454,\n  refresh: 4000,\n  sendAll: true\n});\nconst cron = require('node-cron');\n\nvar h = 6\nvar m = 0\nvar s = 0\n\ncron.schedule(`${s} ${m} ${h} * * *`, () => {\n  sendArtnet({ r: 0, g: 0, b: 0 })\n});\n\ncron.schedule(`0 18 * * *`, () => {\n  Meteor.defer(async () => {\n    await Meteor.call('getConfig', (err, cfg) => {\n      sendArtnet(cfg[INSTANCE].actualColorRgb);\n    })\n  })\n});\n\n// artnet.set(0, 1, loopGen(UNI_1_FIXTURES, color));\n// artnet.set(1, 1, loopGen(UNI_2_FIXTURES, color));\n// artnet.set(0, 1, loopGen(UNI_1_FIXTURES, [0, 128, 96]));\n// artnet.set(1, 1, loopGen(UNI_2_FIXTURES, [0, 128, 96]));\n\nMeteor.startup(() => {\n\n  // Meteor.defer(async () => {\n  //   await Meteor.call('getInstance', (err, instance) => {\n  //     INSTANCE = instance\n  //   })\n  // })\n\n  Meteor.defer(async () => {\n    await Meteor.call('getConfig', (err, cfg) => {\n      sendArtnet(cfg[INSTANCE].actualColorRgb);\n    })\n  })\n\n  Meteor.call('checkConfig', (err, res) => {\n    if (res < 1) {\n      let dateNow = new Date()\n      Configs.insertAsync({\n        power: true,\n        mode: 'default',\n        userPassword: 'jk@mph',\n        masterPassword: 'eliteled@promarc',\n        actualColorId: 'ambar',\n        kph: {\n          actualColorRgb: { \"b\": 62, \"g\": 156, \"r\": 206 },\n          defaultColorName: 'Kubitscheck Bege',\n          defaultColorRgb: { \"b\": 62, \"g\": 156, \"r\": 206 },\n          interfaceIp: '192.168.0.30',\n          interfaceName: 'Lumikit PRO x4i',\n          universes: {\n            universeZeroFixtures: 90,\n            universeOneFixtures: 90,\n            universeTwoFixtures: 90,\n          },\n        },\n        mph: {\n          actualColorRgb: { \"b\": 62, \"g\": 156, \"r\": 255 },\n          defaultColorName: 'Manhattan Bege',\n          defaultColorRgb: { \"b\": 62, \"g\": 156, \"r\": 255 },\n          interfaceIp: '10.0.0.100',\n          interfaceName: 'looizinho ArtDMX Duo',\n          universes: {\n            universeZeroFixtures: 90,\n            universeOneFixtures: 90,\n            universeTwoFixtures: 90,\n          },\n        },\n        dev: {\n          actualColorRgb: { \"b\": 62, \"g\": 156, \"r\": 206 },\n          defaultColorName: 'DEV Bege',\n          defaultColorRgb: { \"b\": 62, \"g\": 156, \"r\": 206 },\n          interfaceIp: '127.0.0.1',\n          interfaceName: 'Capture.se',\n          universes: {\n            universeZeroFixtures: 150,\n            universeOneFixtures: 150,\n            universeTwoFixtures: 0,\n          },\n        },\n        createdAt: dateNow,\n        updatedAt: null,\n        timestamp: dateNow.valueOf()\n      })\n      console.log('CONFIG CREATED!')\n    } else {\n      console.log('CONFIG EXISTS')\n      Meteor.defer(async () => {\n        await Meteor.call('getConfig', (err, res) => {\n        })\n      })\n    }\n  });\n\n  var cursorConfigs = Configs.find();\n  var cursorLogs = ServerLogs.find();\n\n  cursorConfigs.observeChanges({\n    changed(id, obj) {\n      console.log(obj[INSTANCE].actualColorRgb)\n      sendArtnet(obj[INSTANCE].actualColorRgb);\n    }\n  });\n\n  cursorLogs.observeChanges({\n    added(id, object) {\n    }\n  });\n\n  ServerLogs.insertAsync({\n    instance: INSTANCE,\n    status: 'startup',\n    timestamp: new Date().valueOf(),\n    createdAt: new Date()\n  })\n});\n\nfunction loopGen(fixturesQtt, rgb, opacity = 1) {\n  const arrayFixtures = [];\n  for (let i = 0; i < fixturesQtt; i++) {\n    arrayFixtures.push(rgb[0] * opacity, rgb[1] * opacity, rgb[2] * opacity);\n  }\n  return arrayFixtures;\n}\n\nfunction sendArtnet(color = { r: 255, g: 191, b: 0 }) {\n  artnet.set(0, 1, loopGen(90, [color.b, color.r, color.g]), function (err, res) {\n    artnet.set(1, 1, loopGen(90, [color.b, color.r, color.g]), function (err, res) {\n      // artnet.close();\n    });\n  });\n}"]}